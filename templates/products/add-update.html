{% extends "base.html" %}

{% block main %}

<div class="container mb-5">
  <h3 class="text-center mt-5 shadow-sm p-3 mb-3 bg-white rounded">{{"Update Product" if prod_id else "Add Product"}}
  </h3>
  {% if prod_id %}
  <form class="m-auto w-50" action="/products/add-update/{{prod_id}}" method="post">
    {% else %}

    <form class="m-auto w-50" action="/products/add-update" method="post">
      {% endif %}



      <div class="form-group row">
        <label for="name" class="col-sm-4 col-form-label">Name</label>
        <div class="col-sm-8">
          <input type="text" class="form-control mb-3" id="name" name="name" placeholder="Name"
            value="{{product.name if product else ''}}">
        </div>
      </div>



      <div class="form-group row">
        <label for="quantity" class="col-sm-4 col-form-label">Quantity</label>
        <div class="col-sm-8">
          <input type="number" class="form-control mb-3" id="quantity" name="quantity" placeholder="1"
            value="{{product.quantity if product else ''}}">
        </div>
      </div>

      <div class="form-group row">
        <label for="price" class="col-sm-4 col-form-label">Price</label>
        <div class="col-sm-8">
          <input type="number" class="form-control mb-3" id="price" name="price" placeholder="Price"
            value="{{product.price if product else ''}}">
        </div>
      </div>

      <div class="form-group row">
        <label for="category" class="col-sm-4 col-form-label">Select Category</label>
        <div class="col-sm-8">
          <select class="form-select mb-3" aria-label="Select Category" name="category" id="category">
            <option selected>select category</option>
            {% for category in categories %}
              <option value="{{category.code}}">{{category.name | title}}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label for="barcode" class="col-sm-4 col-form-label">Barcode</label>
        <div class="col-sm-8">
          <input type="text" class="form-control mb-3" id="barcode" name="barcode" placeholder="Barcode"
            value="{{product.barcode if product else ''}}">
        </div>
      </div>

      <div class="d-grid gap-2">
        <button type="submit" class="btn btn-primary btn-block">submit</button>
      </div>
    </form>

</div>
{% endblock %}

{% block script %}
<script>
  const name = document.querySelector('#name').value.slice(0,3).toUpperCase();
  const category = document.querySelector('#category').value.toUpperCase();
  const date = new Date();
  let month = date.getMonth() + 1;
  month.toString()
  if (month < 10) month = '0' + month;
  let year = date.getFullYear() - 2000;
  year.toString();
  const 
</script>
{% endblock %}